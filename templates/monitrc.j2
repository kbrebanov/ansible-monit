# {{ ansible_managed }}

set daemon {{ monit_check_services_interval }}
{% if monit_start_delay > 0 %}
  with start delay {{ monit_start_delay }}
{% endif %}
set logfile {{ monit_log_file }}
set pidfile {{ monit_pid_file }}
set idfile {{ monit_id_file }}
set statefile {{ monit_state_file }}
{% if monit_mailservers %}
set mailserver
{% for mailserver in monit_mailservers %}
{% if not loop.last %}
  {{ mailserver.name }} port {{ mailserver.port }},
{% else %}
  {{ mailserver.name }} port {{ mailserver.port }}
{% endif %}
{% endfor %}
{% endif %}
set eventqueue
  basedir {{ monit_eventqueue_basedir }}
{% if monit_eventqueue_slots %}
  slots {{ monit_eventqueue_slots }}
{% endif %}
set mail-format {
  from: {{ monit_mail_format_from }}
  subject: {{ monit_mail_format_subject }}
  message: {{ monit_mail_format_message }}
}
{% if monit_httpd_enabled %}
set httpd port {{ monit_httpd_port }} and
  use address {{ monit_httpd_address }}
{% if monit_httpd_allow %}
{% for allow in monit_httpd_allow %}
  allow {{ allow }}
{% endfor %}
{% endif %}
{% endif %}
{% for include_dir in monit_include_dirs %}
include {{ include_dir }}
{% endfor %}
